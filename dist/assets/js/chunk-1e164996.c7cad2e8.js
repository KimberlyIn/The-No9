(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e164996"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"466d":function(e,t,c){"use strict";var n=c("c65b"),a=c("d784"),r=c("825a"),i=c("50c4"),o=c("577e"),s=c("1d80"),l=c("dc4a"),u=c("8aa5"),d=c("14c3");a("match",(function(e,t,c){return[function(t){var c=s(this),a=void 0==t?void 0:l(t,e);return a?n(a,t,c):new RegExp(t)[e](o(c))},function(e){var n=r(this),a=o(e),s=c(t,n,a);if(s.done)return s.value;if(!n.global)return d(n,a);var l=n.unicode;n.lastIndex=0;var p,h=[],b=0;while(null!==(p=d(n,a))){var g=o(p[0]);h[b]=g,""===g&&(n.lastIndex=u(a,i(n.lastIndex),l)),b++}return 0===b?null:h}]}))},"841c":function(e,t,c){"use strict";var n=c("c65b"),a=c("d784"),r=c("825a"),i=c("1d80"),o=c("129f"),s=c("577e"),l=c("dc4a"),u=c("14c3");a("search",(function(e,t,c){return[function(t){var c=i(this),a=void 0==t?void 0:l(t,e);return a?n(a,t,c):new RegExp(t)[e](s(c))},function(e){var n=r(this),a=s(e),i=c(t,n,a);if(i.done)return i.value;var l=n.lastIndex;o(l,0)||(n.lastIndex=0);var d=u(n,a);return o(n.lastIndex,l)||(n.lastIndex=l),null===d?-1:d.index}]}))},f4f8:function(e,t,c){"use strict";c.r(t);var n=c("7a23"),a={class:"menu"},r={class:"container"},i=Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("h5",null,"時尚皮藝 Leather")],-1),o={class:"pos-rel"},s={class:"nav-icons me-2 d-none d-md-block"},l={key:0,class:"search-list shadow rounded-1"},u={class:"list-unstyled m-0"},d=["onClick"],p={class:"product-category"},h=Object(n["createTextVNode"])(" 全部 "),b=["onClick"],g={class:"product-col row row-cols-1 row-cols-md-2 row-cols-lg-3"},m={class:"pos-rel"},f=["onClick"],j={key:0,class:"sale"},O={class:"text-center my-4"},v={class:"fw-bold"},k={class:"price mb-3"},y={key:0},E=["onClick"];function N(e,t,c,N,V,w){var C=Object(n["resolveComponent"])("Search"),B=Object(n["resolveComponent"])("router-link"),P=Object(n["resolveComponent"])("Pagination");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,[Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("div",r,[Object(n["createElementVNode"])("div",null,[i,Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["nav-search rounded-pill",V.isFocus?"expand":""])},[Object(n["createVNode"])(C,{role:V.isFocus?"":"button",onClick:t[0]||(t[0]=function(e){return V.isFocus=!0})},null,8,["role"]),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"商品名稱","onUpdate:modelValue":t[1]||(t[1]=function(e){return V.searchInput=e}),ref:"searchInput",onKeyup:[t[2]||(t[2]=Object(n["withKeys"])((function(e){return V.key--}),["up"])),t[3]||(t[3]=Object(n["withKeys"])((function(e){return V.key++}),["down"]))]},null,544),[[n["vModelText"],V.searchInput,void 0,{trim:!0,number:!0}]]),Object(n["createElementVNode"])("i",{class:"bi bi-x material-icons fs-5",role:"button",onClick:t[4]||(t[4]=function(e){return V.isFocus=!1,V.searchInput=""})}),V.filterSearchDatas.length>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",l,[Object(n["createElementVNode"])("ul",u,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(V.filterSearchDatas,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:"p-2",role:"button",key:e.id,onClick:function(e){return w.toggleList(t)}},Object(n["toDisplayString"])(e.title),9,d)})),128))])])):Object(n["createCommentVNode"])("",!0)],2)])])]),Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("ul",null,[V.products.length>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:0,class:Object(n["normalizeClass"])(["btn btn-outline-primary","all"===V.isActive?"active":""]),onClick:t[5]||(t[5]=function(e){return w.filterProducts(1,"all"),V.isActive="all"})},[Object(n["createVNode"])(B,{to:{query:{category:"all",page:1}}},{default:Object(n["withCtx"])((function(){return[h]})),_:1})],2)):Object(n["createCommentVNode"])("",!0),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(V.category,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:Object(n["normalizeClass"])(["btn btn-outline-primary",V.isActive===e?"active":""]),key:t,onClick:function(t){return w.filterProducts(1,e),V.isActive=e}},[Object(n["createVNode"])(B,{to:{query:{category:e,page:1}}},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e),1)]})),_:2},1032,["to"])],10,b)})),128))])]),Object(n["createElementVNode"])("div",g,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(V.filterDatas,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"col",key:t.id},[Object(n["createElementVNode"])("div",m,[Object(n["createElementVNode"])("a",{href:"#",onClick:Object(n["withModifiers"])((function(e){return w.viewProduct(t.id)}),["prevent"])},[t.price<t.origin_price?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",j,"On Sale !!")):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",{style:Object(n["normalizeStyle"])([{height:"300px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(t.imageUrl,")")}])},null,4)],8,f)]),Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("h6",v,Object(n["toDisplayString"])(t.title),1),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("small",{class:Object(n["normalizeClass"])(t.price<t.origin_price?"del":"")},"原價 $"+Object(n["toDisplayString"])(e.$cash(t.origin_price))+" NTD",3)]),Object(n["createElementVNode"])("div",k,[t.price<t.origin_price?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",y,"$"+Object(n["toDisplayString"])(e.$cash(t.price))+" ",1)):Object(n["createCommentVNode"])("",!0)])]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary mb-4",onClick:Object(n["withModifiers"])((function(e){return w.getCart(t.id)}),["prevent"])}," 加入購物車 ",8,E)])])])})),128))]),Object(n["createVNode"])(P,{pages:V.pagination,onEmitPages:w.getPagesProducts},null,8,["pages","onEmitPages"])])])])}var V=c("2909"),w=(c("99af"),c("d81d"),c("d3b7"),c("6062"),c("3ca3"),c("ddb0"),c("4de4"),c("ac1f"),c("466d"),c("159b"),c("b0c0"),c("25f3")),C=(c("841c"),{class:"search",viewBox:"0 0 512 512",fill:"currentColor"}),B=["innerHTML"];function P(e,t,c,a,r,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])("svg",C,[Object(n["createElementVNode"])("g",{innerHTML:r.search},null,8,B)])}var S={data:function(){return{search:'\n        <path d="M505.749,475.587l-145.6-145.6c28.203-34.837,45.184-79.104,45.184-127.317c0-111.744-90.923-202.667-202.667-202.667S0,90.925,0,202.669s90.923,202.667,202.667,202.667c48.213,0,92.48-16.981,127.317-45.184l145.6,145.6c4.16,4.16,9.621,6.251,15.083,6.251s10.923-2.091,15.083-6.251C514.091,497.411,514.091,483.928,505.749,475.587z M202.667,362.669c-88.235,0-160-71.765-160-160s71.765-160,160-160s160,71.765,160,160S290.901,362.669,202.667,362.669z" />'}}},x=c("d959"),L=c.n(x);const D=L()(S,[["render",P]]);var $=D,I={class:"d-flex justify-content-center"},M={"aria-label":"Page navigation example "},_={class:"pagination"},A=Object(n["createElementVNode"])("span",{"aria-hidden":"true"},"«",-1),z=[A],q={key:0,class:"page-link"},F=["onClick"],T=Object(n["createElementVNode"])("span",{"aria-hidden":"true"},"»",-1),K=[T];function H(e,t,c,a,r,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",I,[Object(n["createElementVNode"])("nav",M,[Object(n["createElementVNode"])("ul",_,[Object(n["createElementVNode"])("li",{class:Object(n["normalizeClass"])(["page-item",{disabled:!c.pages.has_pre}])},[Object(n["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return i.updatePage(c.pages.current_page-1)}),["prevent"]))},z)],2),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(c.pages.total_pages,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:Object(n["normalizeClass"])(["page-item",{active:c.pages===c.pages.current_page}]),key:e},[e===c.pages.current_page?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",q,Object(n["toDisplayString"])(e),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("a",{key:1,class:"page-link",href:"#",onClick:Object(n["withModifiers"])((function(t){return i.updatePage(e)}),["prevent"])},Object(n["toDisplayString"])(e),9,F))],2)})),128)),Object(n["createElementVNode"])("li",{class:Object(n["normalizeClass"])(["page-item",{disabled:!c.pages.has_next}])},[Object(n["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=Object(n["withModifiers"])((function(e){return i.updatePage(c.pages.current_page+1)}),["prevent"]))},K)],2)])])])}var J={props:["pages"],methods:{updatePage:function(e){this.$emit("emitPages",e)}}};const R=L()(J,[["render",H]]);var U=R,G={inject:["emitter","$httpMessageState"],components:{Search:$,Pagination:U},data:function(){return{isLoading:!1,products:[],pages:[],category:[],filterDatas:[],tempArry:[],isActive:"all",path:{category:"",page:""},pagination:{},currentPage:1,filterSearchDatas:[],searchInput:"",key:-1,oldKey:0,pos:0,isFocus:!1,scroll:{},tips:{data:{success:!1,message:"糟糕，目前沒有可以更新的商品喔。"}}}},methods:{getProducts:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jemmanine","/products");this.isLoading=!0,this.$http.get(t).then((function(t){if(t.data.success){e.products=t.data.products;var c=e.products.map((function(e){return e.category})),n=new Set(c);e.category=Object(V["a"])(n),e.filterProducts(e.path.page,e.path.category)}else e.$httpMessageState(t,"商品取得")})).catch((function(){e.$httpMessageState(e.tips,"商品清單更新")}))},getPagesProducts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=t;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jemmanine","/products?page=").concat(t);this.isLoading=!0,this.$http.get(c).then((function(t){e.products=t.data.products,e.pagination=t.data.pagination,e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"錯誤訊息")}))},getCart:function(e){var t=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jemmanine","/cart"),a={product_id:e,qty:c};this.$http.post(n,{data:a}).then((function(e){e.data.success?(t.$httpMessageState(e,"加入購物車"),t.emitter.emit("get-cart")):alert(e.data.message)})).catch((function(){t.$httpMessageState(t.tips,"商品清單更新")}))},getPath:function(){this.path.category=this.$route.query.category||"all",this.path.page=this.$route.query.page||1,this.isActive=this.path.category},filterProducts:function(e){var t=this;this.getPath(),"all"===this.path.category?this.tempArry=this.products:this.tempArry=this.products.filter((function(e){return e.category===t.path.category}));var c=Object(w["b"])(e,this.tempArry);this.pages=c.pages,this.filterDatas=c.newArray},filterSearchProducts:function(){var e=this.searchInput;if(this.key=-1,e){var t=this.products.filter((function(t){return t.title.match(e)}));this.filterSearchDatas=t||""}else this.filterSearchDatas=""},toggleList:function(e){var t=this;e>=0&&(this.key=e);var c=document.querySelectorAll(".search-list li"),n=this.filterSearchDatas.filter((function(e){return e.title===c[t.key].textContent}));if(n.length>0){var a=n[0].id;this.$router.push("/product/".concat(a)),this.searchInput="",this.filterSearchDatas=[],this.key=-1,this.isFocus=!1}else this.$httpMessageState(this.tips,"商品清單更新")},selectOption:function(){var e=this,t=document.querySelectorAll(".search-list li");t.forEach((function(t,c){var n=t;t.classList.remove("curr"),e.pos=t.offsetHeight,c===e.key&&n.classList.add("curr")}))},scrollList:function(){var e=document.querySelector(".search-list"),t=this.key;t<0||this.oldKey<0?this.key=0:t>=this.filterSearchDatas.length-1?this.key=this.filterSearchDatas.length-1:(t%4===0||this.oldKey>t)&&(e.scrollTop=this.pos*this.key)},viewProduct:function(e){this.$router.push("/product/".concat(e))}},watch:{$route:{handler:function(e){"Products"===e.name&&this.filterProducts(e.query.page||1,e.query.category||"all")},deep:!0},datas:function(){this.getProducts()},searchInput:function(){this.filterSearchProducts()},key:function(e,t){this.selectOption(),this.oldKey=t,this.scroll=this.scrollList(e)}},mounted:function(){var e=this;this.getPath(),this.getProducts(),this.getPagesProducts(),window.addEventListener("scroll",this.scrollList),this.$refs.searchInput.addEventListener("keydown",(function(t){13===t.keyCode&&(e.toggleList(),window.removeEventListener("scroll",e.scroll))})),this.emitter.emit("page-loading",!0),setTimeout((function(){e.emitter.emit("page-loading",!1)}),1e3)}};const Q=L()(G,[["render",N]]);t["default"]=Q}}]);
//# sourceMappingURL=chunk-1e164996.c7cad2e8.js.map