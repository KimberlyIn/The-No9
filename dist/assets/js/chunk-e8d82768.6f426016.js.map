{"version":3,"sources":["webpack:///./src/views/Backend/Products.vue","webpack:///./src/components/Backend/CreateProduct.vue","webpack:///./src/components/Backend/CreateProduct.vue?a87d","webpack:///./src/views/Backend/Products.vue?11bd","webpack:///./src/components/Backend/Pagination.vue","webpack:///./src/components/Backend/Pagination.vue?55d0"],"names":["class","width","actuve","isLoading","z-index","type","openModal","products","item","key","id","category","title","$filters","currency","origin_price","price","is_enabled","openDelProductModal","pages","pagination","getProducts","product","tempProduct","isNew","updateProduct","ref","delProduct","data-bs-backdrop","data-bs-keyboard","tabindex","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","for","imageUrl","placeholder","status","fileUploading","uploadFile","src","imagesUrl","image","splice","length","push","min","unit","description","content","true-value","false-value","$emit","props","Object","default","Boolean","data","modal","emits","mixins","modalMixin","inject","watch","this","methods","uploadedFile","$refs","fileInput","files","formData","FormData","append","url","$http","post","headers","then","response","success","value","emitter","emit","style","message","catch","error","$httpMessageState","__exports__","currentPage","components","Pagination","CreateProduct","DeleteProduct","page","api","get","productComponent","createProduct","httpMethod","hideModal","delComponent","deleteProduct","delete","created","render","has_pre","href","updatePage","current_page","total_pages","has_next"],"mappings":"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","file":"assets/js/chunk-e8d82768.6f426016.js","sourcesContent":["<template>\n  <div class=\"div-backend-top\">\n    <Loading :actuve=\"isLoading\" :z-index=\"1060\"></Loading>\n    <div class=\"text-end mt-4 mx-5\"> \n      <button type=\"button\" class=\"btn btn-secondary\" @click=\"openModal(true)\">建立新的產品</button>\n    </div>\n    <div class=\"px-3\">\n      <table class=\"table table-hover mt-4\">\n        <thead>\n          <tr>\n            <th width=\"100\">分類</th>\n            <th>產品名稱</th>\n            <th width=\"120\">原價</th>\n            <th width=\"120\">售價</th>\n            <th width=\"120\">是否啟用</th>\n            <th width=\"150\">編輯</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr \n            v-for=\"item in products\" :key=\"item.id\"\n          >\n            <td>{{ item.category }}</td>\n            <td>{{ item.title }}</td>\n            <td>{{ $filters.currency(item.origin_price) }}</td>\n            <td>{{ $filters.currency(item.price) }}</td>\n            <td>\n              <span class=\"text-success\" v-if=\"item.is_enabled\">啟用</span>\n              <span v-else>未啟用</span>\n            </td>\n            <td>\n              <button \n                type=\"button\" \n                class=\"btn btn-sm btn-outline-secondary border-end-0 rounded-0\"\n                @click=\"openModal(false, item)\"\n              >\n                編輯\n              </button>\n              <button \n                type=\"button\" \n                class=\"btn btn-sm btn-outline-danger rounded-0\" \n                @click=\"openDelProductModal(item)\"\n              >\n                刪除\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    \n    <!-- :pages=\"pagination\" 外層 Products.vue 的 pagination 傳遞 data 到內層 Pagination.vue 並自定義名稱為 pages -->\n    <!-- @emit-page=\"getProducts\" 內層 Pagination.vue 用 emit 觸發外層 Products.vue 的 getProducts，且自訂義名稱為 emit-page -->\n    <Pagination :pages=\"pagination\" @emit-pages=\"getProducts\"></Pagination>\n    <CreateProduct :product=\"tempProduct\" :isNew=\"isNew\" @update-product=\"updateProduct\" ref=\"createProduct\"/>\n\n    <DeleteProduct :item=\"tempProduct\" ref=\"deleteProduct\" @del-product=\"delProduct\"></DeleteProduct>\n  </div>\n</template>\n\n<script>\nimport Pagination from '@/components/Backend/Pagination.vue';\nimport CreateProduct from '@/components/Backend/CreateProduct.vue';\nimport DeleteProduct from '@/components/Backend/DeleteProduct.vue';\n\nexport default {\n  data() {\n    return {\n      products: [],\n      pagination: {},\n      tempProduct: {},\n      isLoading: false,\n      isNew: false,\n      status: {\n        fileUploading: false,\n      },\n      // modal: {\n      //   editModal: '',\n      //   delModal: '',\n      // },\n      // 調用頁數資料使用\n      currentPage: 1,\n    };\n  },\n  components: {\n    Pagination,\n    CreateProduct,\n    DeleteProduct,\n  },\n  inject: ['emitter'],\n  methods: {\n    // 抓取頁數商品\n    getProducts(page = 1) {\n      this.currentPage = page;\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/products?page=${page}`;\n      this.isLoading = true;\n      this.$http.get(api)\n      .then((response) => {\n        this.products = response.data.products;\n        this.pagination = response.data.pagination;\n        this.isLoading = false;\n      })\n      .catch((error) => {\n        this.isLoading = false;\n        this.$httpMessageState(error.response, '錯誤訊息');\n      })\n    },\n    openModal(isNew, item) {\n      if (isNew) {\n        this.tempProduct = {};\n        this.isNew = true;\n      } else {\n        this.tempProduct = { ...item };\n        this.isNew = false;\n      }\n      const productComponent = this.$refs.createProduct;\n      productComponent.openModal();\n    },\n    updateProduct(item) {\n      // 這個部分猜測是直接將 item 賦予到上面 data 的 tempProuct\n      this.tempProduct = item;\n      let api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product`;\n      this.isLoading = true;\n      let httpMethod = 'post';\n      let status = '新增產品';\n      if (!this.isNew) {\n        api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product/${this.tempProduct.id}`;\n        httpMethod = 'put';\n        status = '更新產品';\n      }\n      const productComponent = this.$refs.createProduct;\n      this.$http[httpMethod](api, { data: this.tempProduct }).then((response) => {\n        this.isLoading = false;\n        this.$httpMessageState(response, status);\n        productComponent.hideModal();\n        this.getProducts(this.currentPage);\n      }).catch((error) => {\n        this.isLoading = false;\n        this.$httpMessageState(error.response, status);\n      });\n    },\n    openDelProductModal(item) {\n      this.tempProduct = { ...item };\n      // 這個部分對到 DeleteProduct.vue 的 id=\"deleteProduct\"\n      const delComponent = this.$refs.deleteProduct;\n      delComponent.openModal();\n    },\n    delProduct() {\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product/${this.tempProduct.id}`\n      this.isLoading = true;\n      this.$http.delete(api)\n      .then((response) => {\n        this.isLoading = false;\n        this.$httpMessageState(response, '刪除產品');\n        // 這個部分對到 DeleteProduct.vue 的 id=\"deleteProduct\"\n        const delComponent = this.$refs.deleteProduct;\n        delComponent.hideModal();\n        this.getProducts(this.currentPage);\n      })\n      .catch((error) => {\n        this.isLoading = false;\n        this.$httpMessageState(error.response, '刪除產品');\n      })\n    },\n  },\n  created() {\n    this.getProducts();\n  },\n}\n</script>","<template>\n  <div>\n    <div class=\"modal fade \" id=\"createProduct\" ref=\"modal\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\n      <div class=\"modal-dialog modal-xl\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header bg-dark\">\n            <h5 class=\"modal-title text-light\" id=\"staticBackdropLabel\">\n              <span v-if=\"isNew\">新增產品</span>\n              <span v-else>編輯產品</span>\n            </h5>\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n          </div>\n          <div class=\"modal-body d-flex\">\n            <div class=\"col-sm-4 pe-3\">\n              <div class=\"mb-3\">\n                <label for=\"image\" class=\"form-label\">輸入圖片網址</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"image\"\n                  v-model=\"tempProduct.imageUrl\"\n                  placeholder=\"請輸入圖片連結\"\n                />\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"customFile\" class=\"form-label\"\n                  >或 上傳圖片\n                  <i\n                    class=\"fas fa-spinner fa-spin\"\n                    v-if=\"status.fileUploading\"\n                  ></i>\n                </label>\n                <input\n                  type=\"file\"\n                  id=\"customFile\"\n                  class=\"form-control\"\n                  ref=\"fileInput\"\n                  @change=\"uploadFile\"\n                />\n              </div>\n              <img class=\"img-fluid\" :src=\"tempProduct.imageUrl\" />\n              <div class=\"mt-5\" v-if=\"tempProduct.imagesUrl\">\n                <div\n                  v-for=\"(image, key) in tempProduct.imagesUrl\"\n                  class=\"mb-3\"\n                  :key=\"key\"\n                >\n                  <input\n                    type=\"url\"\n                    class=\"form-control form-control\"\n                    v-model=\"tempProduct.imagesUrl[key]\"\n                    placeholder=\"請輸入連結\"\n                  />\n                  <div>\n                    <img class=\"img-fluid\" :src=\"image\"/>\n                  </div>\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-outline-danger\"\n                    @click=\"tempProduct.imagesUrl.splice(key, 1)\"\n                  >\n                    移除\n                  </button>\n                </div>\n                <!-- 如果沒有判定，圖片會一直可以新增 -->\n                <div\n                  v-if=\"tempProduct.imagesUrl[tempProduct.imagesUrl.length -1 ] || !tempProduct.imagesUrl.length\"\n                >\n                  <button\n                    class=\"btn btn-outline-secondary btn-sm d-block w-100\"\n                    @click=\"tempProduct.imagesUrl.push('')\"\n                  >\n                    新增圖片\n                  </button>\n                </div>\n              </div>\n            </div>\n            <div class=\"col-sm-8 pe-3\">\n              <div class=\"mb-3\">\n                <label for=\"title\" class=\"form-label mb-2\">標題</label>\n                <input type=\"text\" class=\"form-control w-100\" id=\"title\" v-model=\"tempProduct.title\" placeholder=\"請輸入標題\">\n              </div>\n\n              <div class=\"row mb-3\">\n                <div class=\"col-6\">\n                  <label for=\"category\" class=\"form-label\">分類</label>\n                  <input type=\"text\" class=\"form-control w-100\" id=\"category\" v-model=\"tempProduct.category\" placeholder=\"請輸入分類\">\n                </div>\n                <div class=\"col-6\">\n                  <label for=\"origin_price\" class=\"form-label\">原價</label>\n                  <input type=\"number\" class=\"form-control w-100\" id=\"origin_price\" min=\"0\" v-model.number=\"tempProduct.origin_price\" placeholder=\"請輸入原價\"/>\n                </div>\n              </div>\n\n              <div class=\"row mb-3\">\n                <div class=\"col-6\">\n                  <label for=\"unit\" class=\"form-label\">單位</label>\n                  <input type=\"text\" class=\"form-control w-100\" id=\"unit\" v-model=\"tempProduct.unit\" placeholder=\"請輸入單位\">\n                </div>\n                <div class=\"col-6\">\n                  <label for=\"price\" class=\"form-label\">售價</label>\n                  <input type=\"number\" class=\"form-control w-100\" id=\"price\" min=\"0\" v-model.number=\"tempProduct.price\" placeholder=\"請輸入售價\">\n                </div>\n              </div>\n\n              <div class=\"mb-3\">\n                <label for=\"description\" class=\"form-label\">產品描述</label>\n                <textarea class=\"form-control w-100\" id=\"description\" v-model=\"tempProduct.description\" placeholder=\"請輸入產品描述\"></textarea>\n              </div>\n\n              <div class=\"mb-3\">\n                <label for=\"content\" class=\"form-label\">說明內容</label>\n                <textarea class=\"form-control w-100\" id=\"content\" v-model=\"tempProduct.content\" placeholder=\"請輸入說明內容\"></textarea>\n              </div>\n              <div class=\"form-check\">\n                <input \n                  class=\"form-check-input\" \n                  type=\"checkbox\" \n                  id=\"is_enabled\" \n                  v-model=\"tempProduct.is_enabled\"\n                  :true-value=\"1\" \n                  :false-value=\"0\"\n                >\n                <label class=\"form-check-label\" for=\"is_enabled\">\n                  是否啟用\n                </label>\n              </div>\n            </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-outline-secondary\" data-bs-dismiss=\"modal\">取消</button>\n            <!-- @click=\"$emit('update-product', tempProduct)\" data 裡的 tempProduct 已被賦予傳進來的 product? -->\n            <button type=\"button\" class=\"btn btn-secondary\" @click=\"$emit('update-product', tempProduct)\">確認</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  props: {\n    product: {\n      type: Object,\n      default() { return {}; },\n    },\n    isNew: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      status: {},\n      modal: '',\n      tempProduct: {},\n    };\n  },\n  emits: ['update-product'],\n  mixins: [modalMixin],\n  inject: ['emitter'],\n  watch: {\n    product() {\n      this.tempProduct = this.product;\n      if (!this.tempProduct.imagesUrl) {\n        this.tempProduct.imagesUrl = [];\n      }\n      if (!this.tempProduct.imageUrl) {\n        this.tempProduct.imageUrl = '';\n      }\n    },\n  },\n  methods: {\n    uploadFile() {\n      const uploadedFile = this.$refs.fileInput.files[0];\n      const formData = new FormData();\n      formData.append('file-to-upload', uploadedFile);\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/upload`;\n      this.status.fileUploading = true;\n      this.$http.post(url, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      }).then((response) => {\n        this.status.fileUploading = false;\n        if (response.data.success) {\n          this.tempProduct.imageUrl = response.data.imageUrl;\n          this.$refs.fileInput.value = '';\n          this.emitter.emit('push-message', {\n            style: 'success',\n            title: '圖片上傳結果',\n            content: response.data.message,\n          });\n        } else {\n          this.$refs.fileInput.value = '';\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: '圖片上傳結果',\n            content: response.data.message,\n          });\n        }\n      }).catch((error) => {\n        this.status.fileUploading = false;\n        this.$httpMessageState(error.response, '圖片失敗');\n      });\n    },\n  },\n};\n</script>\n","import { render } from \"./CreateProduct.vue?vue&type=template&id=3323f8e6\"\nimport script from \"./CreateProduct.vue?vue&type=script&lang=js\"\nexport * from \"./CreateProduct.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\html\\\\六角學院\\\\vue3\\\\vue-cli\\\\the-no9\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Products.vue?vue&type=template&id=3fdf7a7d\"\nimport script from \"./Products.vue?vue&type=script&lang=js\"\nexport * from \"./Products.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\html\\\\六角學院\\\\vue3\\\\vue-cli\\\\the-no9\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"d-flex justify-content-center\">\n    <nav aria-label=\"Page navigation example\">\n      <ul class=\"pagination\" >\n        <!-- :class=\"{ 'disabled':!pages.has_prc } 這個時候的資料已經在 pages 裡面 -->\n        <!-- 發現必須先寫 :class=\"{ disabled: !pages.has_pre }\" 再寫 class=\"page-item\" Previous 才有反應 -->\n        <li :class=\"{ disabled: !pages.has_pre }\" class=\"page-item\">\n          <a \n            class=\"page-link\" \n            href=\"#\" \n            aria-label=\"Previous\"\n            @click.prevent=\"updatePage(pages.current_page - 1)\"\n          >\n            <span aria-hidden=\"true\">&laquo;</span>\n          </a>\n        </li>\n        <li \n          class=\"page-item\"\n          v-for=\"page in pages.total_pages\"\n          :key=\"page\"\n          :class=\"{ active: page === pages.current_page }\"\n        >\n          <span class=\"page-link\" v-if=\"page === pages.current_page\">\n            {{ page }}\n          </span>\n          <a\n            class=\"page-link\"\n            v-else\n            href=\"#\"\n            @click.prevent=\"updatePage(page)\"\n            >{{ page }}\n          </a>\n        </li>\n        <li \n          class=\"page-item\"\n          :class=\"{ disabled: !pages.has_next }\"\n        >\n          <a\n            class=\"page-link\"\n            href=\"#\"\n            aria-label=\"Next\"\n            @click.prevent=\"updatePage(pages.current_page + 1)\"\n          >\n            <span aria-hidden=\"true\">&raquo;</span>\n          </a>\n        </li>\n      </ul>\n    </nav>\n  </div>\n</template>\n\n<script>\nexport default {\n  // Products.vue 的 pagination 傳送進來\n  props:['pages'],\n  methods: {\n    updatePage(page) {\n      // emit 觸發 Products.vue 的 getProducts\n      // 並且代入 getProducts 的參數 page\n      this.$emit('emitPages', page);\n    },    \n  },\n}\n</script>","import { render } from \"./Pagination.vue?vue&type=template&id=4c78c12a\"\nimport script from \"./Pagination.vue?vue&type=script&lang=js\"\nexport * from \"./Pagination.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\html\\\\六角學院\\\\vue3\\\\vue-cli\\\\the-no9\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}