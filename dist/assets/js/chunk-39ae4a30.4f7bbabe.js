(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39ae4a30"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},1799:function(e,t,c){"use strict";var n=c("7a23"),r={class:"d-flex justify-content-center"},a={"aria-label":"Page navigation example"},i={class:"pagination"},o=Object(n["createElementVNode"])("span",{"aria-hidden":"true"},"«",-1),s=[o],l={key:0,class:"page-link"},u=["onClick"],d=Object(n["createElementVNode"])("span",{"aria-hidden":"true"},"»",-1),p=[d];function h(e,t,c,o,d,h){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",r,[Object(n["createElementVNode"])("nav",a,[Object(n["createElementVNode"])("ul",i,[Object(n["createElementVNode"])("li",{class:Object(n["normalizeClass"])([{disabled:!c.pages.has_pre},"page-item"])},[Object(n["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(t){return e.$emit("get-datas",c.pages.current_page-1)}),["prevent"]))},s)],2),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(c.pages.total_pages,(function(t,r){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:Object(n["normalizeClass"])(["page-item",{active:t===c.pages.current_page}]),key:r},[t===c.pages.current_page?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",l,Object(n["toDisplayString"])(t),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("a",{key:1,class:"page-link",href:"#",onClick:Object(n["withModifiers"])((function(c){return e.$emit("get-datas",t)}),["prevent"])},Object(n["toDisplayString"])(t),9,u))],2)})),128)),Object(n["createElementVNode"])("li",{class:Object(n["normalizeClass"])(["page-item",{disabled:!c.pages.has_next}])},[Object(n["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=Object(n["withModifiers"])((function(t){return e.$emit("get-datas",c.pages.current_page+1)}),["prevent"]))},p)],2)])])])}var b={props:["pages"]},m=c("d959"),g=c.n(m);const f=g()(b,[["render",h]]);t["a"]=f},"466d":function(e,t,c){"use strict";var n=c("c65b"),r=c("d784"),a=c("825a"),i=c("50c4"),o=c("577e"),s=c("1d80"),l=c("dc4a"),u=c("8aa5"),d=c("14c3");r("match",(function(e,t,c){return[function(t){var c=s(this),r=void 0==t?void 0:l(t,e);return r?n(r,t,c):new RegExp(t)[e](o(c))},function(e){var n=a(this),r=o(e),s=c(t,n,r);if(s.done)return s.value;if(!n.global)return d(n,r);var l=n.unicode;n.lastIndex=0;var p,h=[],b=0;while(null!==(p=d(n,r))){var m=o(p[0]);h[b]=m,""===m&&(n.lastIndex=u(r,i(n.lastIndex),l)),b++}return 0===b?null:h}]}))},"841c":function(e,t,c){"use strict";var n=c("c65b"),r=c("d784"),a=c("825a"),i=c("1d80"),o=c("129f"),s=c("577e"),l=c("dc4a"),u=c("14c3");r("search",(function(e,t,c){return[function(t){var c=i(this),r=void 0==t?void 0:l(t,e);return r?n(r,t,c):new RegExp(t)[e](s(c))},function(e){var n=a(this),r=s(e),i=c(t,n,r);if(i.done)return i.value;var l=n.lastIndex;o(l,0)||(n.lastIndex=0);var d=u(n,r);return o(n.lastIndex,l)||(n.lastIndex=l),null===d?-1:d.index}]}))},f4f8:function(e,t,c){"use strict";c.r(t);var n=c("7a23"),r={class:"menu"},a={class:"container"},i=Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("h5",null,"時尚皮藝 Leather")],-1),o={class:"pos-rel"},s={class:"nav-icons me-2 d-none d-md-block",style:{"z-index":"1"}},l={key:0,class:"search-list shadow rounded-1"},u={class:"list-unstyled m-0"},d=["onClick"],p={class:"product-category"},h=Object(n["createTextVNode"])(" 全部 "),b=["onClick"],m={class:"product-col row row-cols-1 row-cols-md-2 row-cols-lg-3"},g=["onClick"],f=Object(n["createElementVNode"])("div",{class:"dark-bg"},[Object(n["createElementVNode"])("small",{class:"px-2 py-2"},"查看內容")],-1),j={key:0,class:"sale"},O={class:"text-center my-4"},v={class:"fw-bold"},k={class:"fs-5"},y={class:"price mb-3"},E={key:0},N=["onClick"];function V(e,t,c,V,w,C){var B=Object(n["resolveComponent"])("Search"),S=Object(n["resolveComponent"])("router-link"),x=Object(n["resolveComponent"])("Pagination");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,[Object(n["createElementVNode"])("div",r,[Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("div",null,[i,Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["nav-search rounded-pill",w.isFocus?"expand":""])},[Object(n["createVNode"])(B,{role:w.isFocus?"":"button",onClick:t[0]||(t[0]=function(e){return w.isFocus=!0})},null,8,["role"]),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"商品名稱","onUpdate:modelValue":t[1]||(t[1]=function(e){return w.searchInput=e}),ref:"searchInput",onKeyup:[t[2]||(t[2]=Object(n["withKeys"])((function(e){return w.key--}),["up"])),t[3]||(t[3]=Object(n["withKeys"])((function(e){return w.key++}),["down"]))]},null,544),[[n["vModelText"],w.searchInput,void 0,{trim:!0,number:!0}]]),Object(n["createElementVNode"])("i",{class:"bi bi-x material-icons fs-5",role:"button",onClick:t[4]||(t[4]=function(e){return w.isFocus=!1,w.searchInput=""})}),w.filterSearchDatas.length>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",l,[Object(n["createElementVNode"])("ul",u,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(w.filterSearchDatas,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:"p-2",role:"button",key:e.id,onClick:function(e){return C.toggleList(t)}},Object(n["toDisplayString"])(e.title),9,d)})),128))])])):Object(n["createCommentVNode"])("",!0)],2)])])]),Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("ul",null,[w.products.length>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:0,class:Object(n["normalizeClass"])(["btn btn-outline-primary","all"===w.isActive?"active":""]),onClick:t[5]||(t[5]=function(e){return C.filterProducts(1,"all"),w.isActive="all"})},[Object(n["createVNode"])(S,{to:{query:{category:"all",page:1}}},{default:Object(n["withCtx"])((function(){return[h]})),_:1})],2)):Object(n["createCommentVNode"])("",!0),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(w.category,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:Object(n["normalizeClass"])(["btn btn-outline-primary",w.isActive===e?"active":""]),key:t,onClick:function(t){return C.filterProducts(1,e),w.isActive=e}},[Object(n["createVNode"])(S,{to:{query:{category:e,page:1}}},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e),1)]})),_:2},1032,["to"])],10,b)})),128))])]),Object(n["createElementVNode"])("div",m,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(w.filterDatas,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"col",key:t.id},[Object(n["createElementVNode"])("div",{class:"pos-rel product-img",style:Object(n["normalizeStyle"])([{height:"300px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(t.imageUrl,")")}]),onClick:Object(n["withModifiers"])((function(e){return C.viewProduct(t.id)}),["prevent"]),role:"button"},[f,t.price<t.origin_price?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",j,"On Sale !!")):Object(n["createCommentVNode"])("",!0)],12,g),Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("h6",v,Object(n["toDisplayString"])(t.title),1),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div",k,[Object(n["createElementVNode"])("small",{class:Object(n["normalizeClass"])(t.price<t.origin_price?"del":"")},"$ "+Object(n["toDisplayString"])(e.$cash(t.origin_price))+" NTD",3)]),Object(n["createElementVNode"])("div",y,[t.price<t.origin_price?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",E,"$ "+Object(n["toDisplayString"])(e.$cash(t.price))+" ",1)):Object(n["createCommentVNode"])("",!0)])]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary mb-4",onClick:Object(n["withModifiers"])((function(e){return C.getCart(t.id)}),["prevent"])}," 加入購物車 ",8,N)])])])})),128))]),Object(n["createVNode"])(x,{pages:w.pages,onGetDatas:C.filterProducts},null,8,["pages","onGetDatas"])])])])}var w=c("2909"),C=(c("99af"),c("d81d"),c("d3b7"),c("6062"),c("3ca3"),c("ddb0"),c("4de4"),c("ac1f"),c("466d"),c("159b"),c("b0c0"),c("25f3")),B=(c("841c"),{class:"search",viewBox:"0 0 512 512",fill:"currentColor"}),S=["innerHTML"];function x(e,t,c,r,a,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])("svg",B,[Object(n["createElementVNode"])("g",{innerHTML:a.search},null,8,S)])}var D={data:function(){return{search:'\n        <path d="M505.749,475.587l-145.6-145.6c28.203-34.837,45.184-79.104,45.184-127.317c0-111.744-90.923-202.667-202.667-202.667S0,90.925,0,202.669s90.923,202.667,202.667,202.667c48.213,0,92.48-16.981,127.317-45.184l145.6,145.6c4.16,4.16,9.621,6.251,15.083,6.251s10.923-2.091,15.083-6.251C514.091,497.411,514.091,483.928,505.749,475.587z M202.667,362.669c-88.235,0-160-71.765-160-160s71.765-160,160-160s160,71.765,160,160S290.901,362.669,202.667,362.669z" />'}}},$=c("d959"),P=c.n($);const L=P()(D,[["render",x]]);var I=L,M=c("1799"),_={inject:["emitter","$httpMessageState"],components:{Search:I,Pagination:M["a"]},data:function(){return{isLoading:!1,products:[],pages:[],category:[],filterDatas:[],tempArry:[],isActive:"all",path:{category:"",page:""},filterSearchDatas:[],searchInput:"",key:-1,oldKey:0,pos:0,isFocus:!1,scroll:{},tips:{data:{success:!1,message:"糟糕，目前沒有可以更新的商品喔。"}}}},methods:{getProducts:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jemmanine","/products/all");this.isLoading=!0,this.$http.get(t).then((function(t){if(t.data.success){e.products=t.data.products;var c=e.products.map((function(e){return e.category})),n=new Set(c);e.category=Object(w["a"])(n),e.filterProducts(e.path.page,e.path.category)}else e.$httpMessageState(t,"商品取得")})).catch((function(){e.$httpMessageState(e.tips,"商品清單更新")}))},getCart:function(e){var t=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jemmanine","/cart"),r={product_id:e,qty:c};this.$http.post(n,{data:r}).then((function(e){e.data.success?(t.$httpMessageState(e,"加入購物車"),t.emitter.emit("get-cart")):alert(e.data.message)})).catch((function(){t.$httpMessageState(t.tips,"商品清單更新")}))},getPath:function(){this.path.category=this.$route.query.category||"all",this.path.page=this.$route.query.page||1,this.isActive=this.path.category},filterProducts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.getPath(),"all"===this.path.category?this.tempArry=this.products:this.tempArry=this.products.filter((function(t){return t.category===e.path.category}));var c=Object(C["b"])(t,this.tempArry);this.pages=c.pages,this.filterDatas=c.newArray,this.$router.push("./menu?category=".concat(this.path.category,"&page=").concat(t))},filterSearchProducts:function(){var e=this.searchInput;if(this.key=-1,e){var t=this.products.filter((function(t){return t.title.match(e)}));this.filterSearchDatas=t||""}else this.filterSearchDatas=""},toggleList:function(e){var t=this;e>=0&&(this.key=e);var c=document.querySelectorAll(".search-list li"),n=this.filterSearchDatas.filter((function(e){return e.title===c[t.key].textContent}));if(n.length>0){var r=n[0].id;this.$router.push("/product/".concat(r)),this.searchInput="",this.filterSearchDatas=[],this.key=-1,this.isFocus=!1}else this.$httpMessageState(this.tips,"商品清單更新")},selectOption:function(){var e=this,t=document.querySelectorAll(".search-list li");t.forEach((function(t,c){var n=t;t.classList.remove("curr"),e.pos=t.offsetHeight,c===e.key&&n.classList.add("curr")}))},scrollList:function(){var e=document.querySelector(".search-list"),t=this.key;t<0||this.oldKey<0?this.key=0:t>=this.filterSearchDatas.length-1?this.key=this.filterSearchDatas.length-1:(t%4===0||this.oldKey>t)&&(e.scrollTop=this.pos*this.key)},viewProduct:function(e){this.$router.push("/product/".concat(e))}},watch:{$route:{handler:function(e){"Products"===e.name&&this.filterProducts(e.query.page||1,e.query.category||"all")},deep:!0},datas:function(){this.getProducts()},searchInput:function(){this.filterSearchProducts()},key:function(e,t){this.selectOption(),this.oldKey=t,this.scroll=this.scrollList(e)}},mounted:function(){var e=this;this.getPath(),this.getProducts(),window.addEventListener("scroll",this.scrollList),this.$refs.searchInput.addEventListener("keydown",(function(t){13===t.keyCode&&(e.toggleList(),window.removeEventListener("scroll",e.scroll))})),this.emitter.emit("page-loading",!0),setTimeout((function(){e.emitter.emit("page-loading",!1)}),1e3)}};const A=P()(_,[["render",V]]);t["default"]=A}}]);
//# sourceMappingURL=chunk-39ae4a30.4f7bbabe.js.map