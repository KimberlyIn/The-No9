{"version":3,"sources":["webpack:///./src/views/Backend/Articles.vue","webpack:///./src/components/Backend/ArticleModal.vue","webpack:///./src/components/Backend/ArticleModal.vue?2a05","webpack:///./src/views/Backend/Articles.vue?9c7c"],"names":["class","type","openModal","articles","article","key","title","author","description","$filters","date","create_at","isPublic","tempArticle","is-new","isNew","ref","id","tabindex","role","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","for","placeholder","props","Object","default","Boolean","mixins","modalMixin","data","modal","__exports__","inject","components","ArticleModal","mounted","this","getArticles","methods","page","api","$http","get","then","response","catch","error","$httpMessageState","getArticle","item","Date","getTime","tag","$refs","articleModal","updateArticle","httpMethod","render"],"mappings":"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","file":"assets/js/chunk-2d0f1552.f69ad2da.js","sourcesContent":["<template>\r\n  <!-- \r\n    1.抓取所有文章列表 \r\n    2.對每個位置補上抓到的對應資料\r\n    3.製作建立新文章：串接 put Api\r\n    4.\r\n  -->\r\n  <div>\r\n    <div class=\"div-backend-top\">\r\n      <!-- <Loading :actuve=\"isLoading\" :z-index=\"1060\"></Loading> -->\r\n      <div class=\"text-end mt-4 mx-5\"> \r\n        <button \r\n          type=\"button\" \r\n          class=\"btn btn-secondary\"\r\n          @click=\"openModal(true)\"\r\n        >\r\n          建立新的頁面\r\n        </button>\r\n      </div>\r\n      <div class=\"px-3\">\r\n        <table class=\"table table-hover mt-4\">\r\n          <thead>\r\n            <tr>\r\n              <th>標題</th>\r\n              <th>作者</th>\r\n              <th>描述</th>\r\n              <th>建立時間</th>\r\n              <th>是否公開</th>\r\n              <th>編輯</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"article in articles\" :key=\"article.articles\">\r\n              <td>{{ article.title }}</td>\r\n              <td>{{ article.author }}</td>\r\n              <td>{{ article.description }}</td>\r\n              <td>{{ $filters.date(article.create_at) }}</td>\r\n              <td>\r\n                <span class=\"text-success\" v-if=\"article.isPublic\">已上架</span>\r\n                <span v-else>未上架</span>\r\n              </td>\r\n              <td>\r\n                <button \r\n                  type=\"button\" \r\n                  class=\"btn btn-sm btn-outline-secondary border-end-0 rounded-0\"\r\n                >\r\n                  編輯\r\n                </button>\r\n                <button \r\n                  type=\"button\" \r\n                  class=\"btn btn-sm btn-outline-danger rounded-0\"\r\n                >\r\n                  刪除\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n    <!-- ArticleModal.vue 中觸發 button @click=\"$emit('update-article', tempArticle)\" -->\r\n    <ArticleModal :article=\"tempArticle\" :is-new=\"isNew\" ref=\"articleModal\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ArticleModal from '@/components/Backend/ArticleModal.vue';\r\n\r\nexport default {\r\n  inject: ['emitter', '$httpMessageState'],\r\n  components: {\r\n    ArticleModal,\r\n  },\r\n  data() {\r\n    return {\r\n      articles: [],\r\n      article: {},\r\n      isPublic: false,\r\n      isNew: false,\r\n      tempArticle: {},\r\n      // currentPage: 1,\r\n    };\r\n  },\r\n  mounted() {\r\n    // 這裡要執行才會出現列表\r\n    this.getArticles();\r\n  },\r\n  methods: {\r\n    getArticles(page = 1) {\r\n      // this.currentPage = page;\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/articles?page=${page}`;\r\n      this.$http.get(api)\r\n      .then((response)=>{\r\n        this.articles = response.data.articles;\r\n        // this.pagination = response.data.pagination;\r\n      })\r\n      .catch((error)=>{\r\n        this.$httpMessageState(error.response, '錯誤訊息');\r\n      })\r\n    },\r\n    getArticle(id) {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/article/${id}`;\r\n      this.$http.get(api)\r\n      .then((response)=>{\r\n        this.article = response.data.article;\r\n      })\r\n      .catch((error) => {\r\n        this.$httpMessageState(error.response, '錯誤訊息');\r\n      })\r\n    },\r\n    // 雖然 openModal 大致上都寫好，也在 button 正確的放上 click\r\n    // 但是 this.$refs.articleModal.openModal(); 需要靠 modalMixin 啟用\r\n    // 所以記得在 ArticleModal.vue 把 modalMixin 載入\r\n    openModal(isNew, item) {\r\n      if (isNew) {\r\n        this.tempArticle = {\r\n          isPublic: false,\r\n          create_at: new Date().getTime() / 1000,\r\n          tag: [],\r\n        };\r\n        this.isNew = true;\r\n      } else {\r\n        this.tempArticle = { ...item };\r\n        this.isNew = false;\r\n      }\r\n      this.$refs.articleModal.openModal();\r\n    },\r\n    updateArticle() {\r\n      let api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/article`;\r\n      let httpMethod = 'post';\r\n      \r\n      if(!this.isNew) {\r\n        api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/article/${id}`;\r\n        httpMethod = 'put';\r\n      }\r\n\r\n      this.$http[httpMethod](api, { data: this.tempArticle })\r\n      .then((response)=>{\r\n        \r\n      })\r\n      .catch((error) => {\r\n        this.$httpMessageState(error.response, '錯誤訊息');\r\n      })\r\n\r\n    },\r\n  },\r\n}\r\n</script>","<template>\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"articleModal\"\r\n    tabindex=\"-1\"\r\n    role=\"dialog\"\r\n    aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\"\r\n    ref=\"modal\"\r\n  >\r\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\r\n      <div class=\"modal-content border-0\">\r\n        <div class=\"modal-header bg-dark text-white\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n            <span>新增貼文</span>\r\n            <span>編輯貼文</span>\r\n          </h5>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-sm-4\">\r\n              <div class=\"mb-3\">\r\n                <label for=\"title\" class=\"form-label\">標題</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  id=\"title\"\r\n                  placeholder=\"請輸入標題\"\r\n                />\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label for=\"image\" class=\"form-label\">輸入圖片網址</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  id=\"image\"\r\n                  placeholder=\"請輸入圖片連結\"\r\n                />\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label for=\"author\" class=\"form-label\">作者</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  id=\"author\"\r\n                  placeholder=\"請輸入標題\"\r\n                />\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label for=\"create_at\">文章建立日期</label>\r\n                <input\r\n                  type=\"date\"\r\n                  class=\"form-control\"\r\n                  id=\"create_at\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class=\"col-sm-8\">\r\n              <label for=\"tag\" class=\"form-label\">標籤</label>\r\n              <div class=\"row gx-1 mb-3\">\r\n                <div\r\n                  class=\"col-md-2 mb-1\"\r\n                >\r\n                  <div class=\"input-group input-group-sm\">\r\n                    <input\r\n                      type=\"text\"\r\n                      class=\"form-control form-control\"\r\n                      id=\"tag\"\r\n                      placeholder=\"請輸入標籤\"\r\n                    />\r\n                    <button\r\n                      type=\"button\"\r\n                      class=\"btn btn-outline-danger\"\r\n                    >\r\n                      <i class=\"bi bi-x\"></i>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                <div\r\n                  class=\"col-md-2 mb-1\"\r\n                >\r\n                  <button\r\n                    class=\"btn btn-outline-primary btn-sm d-block w-100\"\r\n                  >\r\n                    新增標籤\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label for=\"description\" class=\"form-label\">文章描述</label>\r\n                <textarea\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  id=\"description\"\r\n                  placeholder=\"請輸入文章描述\"\r\n                ></textarea>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <!-- <ckeditor\r\n                ></ckeditor> -->\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <div class=\"form-check\">\r\n                  <input\r\n                    class=\"form-check-input\"\r\n                    type=\"checkbox\"\r\n                    id=\"isPublic\"\r\n                  />\r\n                  <label class=\"form-check-label\" for=\"isPublic\">\r\n                    是否公開\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-outline-secondary\"\r\n            data-bs-dismiss=\"modal\"\r\n          >\r\n            取消\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-primary\"\r\n          >\r\n            確認\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport modalMixin from '@/mixins/modalMixin';\r\n\r\nexport default {\r\n  props: {\r\n    article: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n    isNew: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n  },\r\n  mixins: [modalMixin],\r\n  data() {\r\n    return {\r\n      modal: '',\r\n    }\r\n  },\r\n}\r\n</script>","import { render } from \"./ArticleModal.vue?vue&type=template&id=3c18ea71\"\nimport script from \"./ArticleModal.vue?vue&type=script&lang=js\"\nexport * from \"./ArticleModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\html\\\\六角學院\\\\vue3\\\\vue-cli\\\\the-no9\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Articles.vue?vue&type=template&id=c70df880\"\nimport script from \"./Articles.vue?vue&type=script&lang=js\"\nexport * from \"./Articles.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\html\\\\六角學院\\\\vue3\\\\vue-cli\\\\the-no9\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}