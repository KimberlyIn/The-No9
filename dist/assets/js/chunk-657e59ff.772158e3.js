(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-657e59ff"],{"41cf":function(e,t,a){e.exports=a.p+"assets/img/logo.eb050ee8.gif"},"6ea1":function(e,t,a){"use strict";a("ae1a")},ae1a:function(e,t,a){},de8a:function(e,t,a){"use strict";a.r(t);var c=a("7a23"),n={class:"main-container"};function o(e,t,a,o,l,s){var r=Object(c["resolveComponent"])("Loading"),i=Object(c["resolveComponent"])("ToastMessages"),d=Object(c["resolveComponent"])("Navbar"),u=Object(c["resolveComponent"])("router-view");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(r,{active:l.isLoading,"z-index":1070},null,8,["active"]),Object(c["createVNode"])(i),Object(c["createVNode"])(d),Object(c["createElementVNode"])("div",n,[Object(c["createVNode"])(u)])],64)}var l=a("41cf"),s=a.n(l),r={class:"fixed-top"},i={class:"navbar navbar-expand-lg navbar-light py-4 px-4"},d=Object(c["createElementVNode"])("img",{src:s.a,alt:"TheNo9-LOGO",style:{width:"160px"},class:"me-3"},null,-1),u=Object(c["createElementVNode"])("button",{class:"navbarBtn navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},[Object(c["createElementVNode"])("span",{class:"navbar-toggler-icon"})],-1),b={class:"collapse navbar-collapse justify-content-end",id:"navbarNavAltMarkup"},m={class:"navbar-nav"},p=Object(c["createElementVNode"])("a",{class:"nav-link pe-4","aria-current":"page",href:"#"},"首頁",-1),v=Object(c["createTextVNode"])("精緻皮件"),f=Object(c["createTextVNode"])("關於我們"),j=Object(c["createTextVNode"])("部落格"),O={class:"d-flex me-3 fun-bar"},g=Object(c["createElementVNode"])("i",{class:"bi bi-cart pe-1"},null,-1),h={key:0,class:"cart-quantity"},N={class:"cartBox offcanvas offcanvas-end offcanvas-size",tabindex:"-1",id:"cartBoxId"},V=Object(c["createElementVNode"])("div",{class:"offcanvas-header px-4"},[Object(c["createElementVNode"])("h5",{class:"offcanvas-title title"},"訂單清單"),Object(c["createElementVNode"])("button",{type:"button",class:"close text-reset","data-bs-dismiss":"offcanvas"},[Object(c["createElementVNode"])("i",{class:"bi bi-x"})])],-1),E={key:0,class:"d-flex flex-column justify-content-center text-center"},x=Object(c["createElementVNode"])("h5",{class:"pb-2 lh-base fs-5 text text-explain"},"您的購物車還沒有商品喔，要開始替自己添加精美皮件了嗎？",-1),y=Object(c["createElementVNode"])("button",{class:"discolor-button",type:"button","data-bs-dismiss":"offcanvas"}," 開始購物 ",-1),k={class:"py-3 d-flex justify-content-between border-bottom"},C={class:"cartBox-img"},w=["onClick"],S=["src"],B={class:"cart-product align-self-start flex-fill ps-3"},T={class:"fw-bold"},I=["onClick"],L={class:"qty-price d-flex pe-3"},M={class:"price text-secondary"},$={class:"unit ps-1"},_={class:"d-flex align-items-center"},q={class:"nav-input input-group bg-light rounded me-3 mt-2 border"},D={class:"input-group-prepend"},A=["disabled","onClick"],z=Object(c["createElementVNode"])("i",{class:"bi bi-dash"},null,-1),F=[z],P=["onUpdate:modelValue"],U={class:"input-group-append"},J=["disabled","onClick"],G=Object(c["createElementVNode"])("i",{class:"bi bi-plus"},null,-1),H=[G],K={key:0,class:"spinner-border spinner-border-sm text-muted me-2",role:"status"},Q=Object(c["createElementVNode"])("span",{class:"visually-hidden"},"Loading...",-1),R=[Q],W={class:"text-secondary"},X=Object(c["createTextVNode"])("小計： "),Y=Object(c["createElementVNode"])("br",null,null,-1),Z={class:"product-delete align-self-center"},ee=["onClick"],te=Object(c["createElementVNode"])("i",{class:"bi bi-x"},null,-1),ae=[te],ce={key:0,class:"offcanvas-footer"},ne={class:"price-text text-end px-4"},oe=Object(c["createTextVNode"])(" 總 計： NT$ "),le={class:"fs-5 fw-bold"},se={class:"row py-3"},re={class:"col-6 pe-1 ps-4 text-end"},ie={class:"col-6 col-6 ps-1 pe-4"},de=Object(c["createElementVNode"])("button",{class:"checkout discolor-button-light w-100",type:"button","data-bs-dismiss":"offcanvas"}," 結帳 ",-1),ue={class:"overlay"};function be(e,t,a,n,o,l){var s,z,G,Q,te,be,me,pe,ve,fe,je=Object(c["resolveComponent"])("Loading"),Oe=Object(c["resolveComponent"])("router-link");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(je,{active:o.isLoading},null,8,["active"]),Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("nav",i,[Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])(["container-fluid",e.toggleNav?"position-fixed vh-100 overflow-hidden":""])},[Object(c["createVNode"])(Oe,{class:"navbar-brand text-secondary",to:"/"},{default:Object(c["withCtx"])((function(){return[d]})),_:1}),u,Object(c["createElementVNode"])("div",b,[Object(c["createElementVNode"])("div",m,[p,Object(c["createVNode"])(Oe,{class:"nav-link pe-4",to:"/menu"},{default:Object(c["withCtx"])((function(){return[v]})),_:1}),Object(c["createVNode"])(Oe,{class:"nav-link pe-4",to:"/about"},{default:Object(c["withCtx"])((function(){return[f]})),_:1}),Object(c["createVNode"])(Oe,{class:"nav-link pe-4",to:"/blog"},{default:Object(c["withCtx"])((function(){return[j]})),_:1}),Object(c["createElementVNode"])("div",O,[Object(c["createElementVNode"])("a",{href:"#",id:"nav-cart-btn",class:"nav-link nav-link-cart","data-bs-toggle":"offcanvas","data-bs-target":"#cartBoxId","aria-controls":"cartBoxId",onClick:t[0]||(t[0]=Object(c["withModifiers"])((function(){return l.getCart&&l.getCart.apply(l,arguments)}),["prevent"]))},[g,null!==(s=o.cart)&&void 0!==s&&null!==(z=s.carts)&&void 0!==z&&z.length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",h,Object(c["toDisplayString"])(null===(G=o.cart)||void 0===G||null===(Q=G.carts)||void 0===Q?void 0:Q.length),1)):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("div",N,[V,Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])(["offcanvas-body d-flex flex-column",{"d-flex justify-content-center":!(null!==(te=o.cart)&&void 0!==te&&null!==(be=te.carts)&&void 0!==be&&be.length)}])},[null!==(me=o.cart)&&void 0!==me&&null!==(pe=me.carts)&&void 0!==pe&&pe.length?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",E,[x,Object(c["createVNode"])(Oe,{to:"/menu"},{default:Object(c["withCtx"])((function(){return[y]})),_:1})])),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(o.cart.carts,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("ul",{class:"list-unstyled",key:e.id},[Object(c["createElementVNode"])("li",k,[Object(c["createElementVNode"])("div",C,[Object(c["createElementVNode"])("a",{href:"#","data-bs-dismiss":"offcanvas",onClick:Object(c["withModifiers"])((function(t){return l.viewProduct(e.product_id)}),["prevent"])},[Object(c["createElementVNode"])("img",{src:e.product.imageUrl,alt:""},null,8,S)],8,w)]),Object(c["createElementVNode"])("div",B,[Object(c["createElementVNode"])("h6",T,[Object(c["createElementVNode"])("a",{class:"text-dark",href:"#","data-bs-dismiss":"offcanvas",onClick:Object(c["withModifiers"])((function(t){return l.viewProduct(e.product_id)}),["prevent"])},Object(c["toDisplayString"])(e.product.title),9,I)]),Object(c["createElementVNode"])("div",L,[Object(c["createElementVNode"])("small",M,"$ "+Object(c["toDisplayString"])(e.product.price)+" / ",1),Object(c["createElementVNode"])("small",$,Object(c["toDisplayString"])(e.product.unit),1)]),Object(c["createElementVNode"])("div",_,[Object(c["createElementVNode"])("div",q,[Object(c["createElementVNode"])("div",D,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-secondary border-0 rounded-0 py-2 px-1 border-end",type:"button",disabled:1===e.qty||o.loadingStatus.loadingItem===e.id,onClick:function(t){return l.updateCart(e,-1)}},F,8,A)]),Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none px-1 bg-light fs-6 text-secondary",placeholder:"","onUpdate:modelValue":function(t){return e.qty=t},disabled:""},null,8,P),[[c["vModelText"],e.qty,void 0,{number:!0}]]),Object(c["createElementVNode"])("div",U,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-secondary border-0 rounded-0 py-2 px-1 border-start",type:"button",disabled:o.loadingStatus.loadingItem===e.id,onClick:function(t){return l.updateCart(e,1)}},H,8,J)])]),Object(c["createElementVNode"])("div",null,[o.loadingStatus.loadingItem===e.id?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",K,R)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("small",W,[X,Y,Object(c["createTextVNode"])(" NT$ "+Object(c["toDisplayString"])(e.total),1)])])])]),Object(c["createElementVNode"])("div",Z,[Object(c["createElementVNode"])("button",{type:"button",class:"close",onClick:function(t){return l.removeCartItem(e.id)}},ae,8,ee)])])])})),128))],2),null!==(ve=o.cart)&&void 0!==ve&&null!==(fe=ve.carts)&&void 0!==fe&&fe.length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ce,[Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("p",ne,[oe,Object(c["createElementVNode"])("span",le,Object(c["toDisplayString"])(o.cart.total),1)])]),Object(c["createElementVNode"])("div",se,[Object(c["createElementVNode"])("div",re,[Object(c["createElementVNode"])("button",{class:"remove-cart discolor-button w-100",type:"button","data-bs-dismiss":"offcanvas",onClick:t[1]||(t[1]=function(e){return l.removeCartAll("all")})}," 清空購物車 ")]),Object(c["createElementVNode"])("div",ie,[Object(c["createVNode"])(Oe,{to:"/order"},{default:Object(c["withCtx"])((function(){return[de]})),_:1})])])])):Object(c["createCommentVNode"])("",!0)])])])],2)]),Object(c["createElementVNode"])("div",ue,[Object(c["createElementVNode"])("div",{class:"overlay-inner",onClick:t[2]||(t[2]=function(){return e.closeNav&&e.closeNav.apply(e,arguments)})})])])],64)}a("99af");var me={data:function(){return{toggler:!1,cart:{},loadingStatus:{loadingItem:""},isLoading:!1,pageName:"",tips:{data:{success:!1,message:"糟糕，目前沒有可以更新的商品喔。"}}}},inject:["emitter","$httpMessageState"],methods:{getCart:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jemmanine","/cart");this.$http.get(t).then((function(t){t.data.success&&(e.cart=t.data.data)})).catch((function(){e.setTips(!1,"無法取得商品。"),e.$httpMessageState(e.tips,"取得商品清單")}))},updateCart:function(e,t){var a=this;this.loadingStatus.loadingItem=e.id;var c=e.qty+t;if(c>=1){var n={product_id:e.product.id,qty:c},o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jemmanine","/cart/").concat(e.id);this.$http.put(o,{data:n}).then((function(e){e.data.success||a.$httpMessageState(a.tips,"商品清單"),a.loadingStatus.loadingItem="",a.getCart()})).catch((function(){a.loadingStatus.loadingItem="",a.setTips(!1,"無法取得商品。"),a.$httpMessageState(a.tips,"商品清單更新")}))}},removeCartItem:function(e){var t=this;this.loadingStatus.loadingItem=e;var a="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jemmanine","/cart/").concat(e);this.$http.delete(a).then((function(e){e.data.success&&(t.getCart(),t.loadingStatus.loadingItem="")})).catch((function(){t.loadingStatus.loadingItem="",t.setTips(!1,"糟糕，無法刪除商品清單。"),t.$httpMessageState(t.tips,"商品清單刪除")}))},removeCartAll:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jemmanine","/carts");this.$http.delete(t).then((function(t){t.data.success?e.getCart():alert(t.data.message)})).catch((function(){e.setTips(!1,"糟糕，無法刪除商品清單。"),e.$httpMessageState(e.tips,"商品清單刪除")}))},viewProduct:function(e){this.$router.push("/product/".concat(e))}},mounted:function(){var e=this;this.getCart(),this.emitter.on("get-cart",(function(){e.getCart()}))},unmounted:function(){var e=this;this.emitter.off("get-cart",(function(){e.getCart()}))}},pe=(a("6ea1"),a("d959")),ve=a.n(pe);const fe=ve()(me,[["render",be]]);var je=fe,Oe=a("f367"),ge={components:{Navbar:je,ToastMessages:Oe["a"]},inject:["emitter"],data:function(){return{isLoading:!1}},methods:{changeLoadingStatus:function(e){this.isLoading=e}},mounted:function(){var e=this;this.emitter.on("change-isLoading",(function(t){e.changeLoadingStatus(t)}))},unmounted:function(){var e=this;this.emitter.off("change-isLoading",(function(t){e.changeLoadingStatus(t)}))}};const he=ve()(ge,[["render",o]]);t["default"]=he}}]);
//# sourceMappingURL=chunk-657e59ff.772158e3.js.map