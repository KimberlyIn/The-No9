{"version":3,"sources":["webpack:///./src/assets/images/logo.gif","webpack:///./src/views/Login.vue","webpack:///./src/views/Login.vue?c242"],"names":["module","exports","class","src","alt","style","for","type","to","login","id","placeholder","user","username","required","autofocus","password","isShowAlert","customClass","alertClass","content","alertMsg","data","isLoading","tips","success","message","components","ToastMessages","provide","emitter","inject","methods","api","this","$http","post","then","response","token","expired","document","cookie","Date","$router","push","catch","$httpMessageState","checkLogin","setTimeout","created","replace","defaults","headers","common","Authorization","__exports__","render"],"mappings":"qGAAAA,EAAOC,QAAU,IAA0B,gC,iFCIlCC,MAAM,oB,EAEP,eAA2F,OAAtFC,IAAA,IAA+BC,IAAI,cAAcC,MAAA,gBAAsBH,MAAM,Q,YAM7EA,MAAM,Y,EACT,eAA2C,OAAtCA,MAAM,uBAAsB,QAAI,G,GAChCA,MAAM,Q,EACT,eAAuD,SAAhDI,IAAI,wBAAuB,iBAAa,G,GAW5CJ,MAAM,Q,EACT,eAAmD,SAA5CI,IAAI,yBAAwB,YAAQ,G,EAU7C,eAEM,OAFDJ,MAAM,eAAa,CACtB,eAAgE,UAAxDK,KAAK,SAASL,MAAM,0BAAyB,Q,MAM1DA,MAAM,uC,4KA3CX,eA0CM,YAxCJ,eAA+B,GAC/B,eAsCM,MAtCN,EAsCM,CArCJ,eAEc,GAFDA,MAAM,8BAA8BM,GAAG,K,yBAClD,iBAA2F,CAA3F,M,MAEF,eAiCO,QAhCLN,MAAM,oEACL,SAAM,8CAAU,EAAAO,OAAA,EAAAA,MAAA,qBAAK,e,CAEtB,eA4BM,MA5BN,EA4BM,CA3BJ,EACA,eAWM,MAXN,EAWM,CAVJ,E,eACA,eAQC,SAPCF,KAAK,QACLL,MAAM,eACNQ,GAAG,uBACHC,YAAY,mB,qDACH,EAAAC,KAAKC,SAAQ,IACtBC,SAAA,GACAC,UAAA,I,mBAFS,EAAAH,KAAKC,cAKlB,eAUM,MAVN,EAUM,CATJ,E,eACA,eAOC,SANCN,KAAK,WACLL,MAAM,eACNQ,GAAG,wBACHC,YAAY,Q,qDACH,EAAAC,KAAKI,SAAQ,IACtBF,SAAA,I,mBADS,EAAAF,KAAKI,cAIlB,K,QAOR,eAEM,MAFN,EAEM,CADS,EAAAC,a,iBAAb,eAA0E,G,MAA/CC,YAAa,EAAAC,WAAaC,QAAS,EAAAC,U,0HAQnD,GACbC,KADa,WAEX,MAAO,CACLC,WAAW,EACXN,aAAa,EACbI,SAAU,GACVF,WAAY,gBACZP,KAAM,GACNY,KAAM,CACJF,KAAM,CACJG,SAAS,EACTC,QAAS,kBAKjBC,WAAY,CACVC,gBAAA,MAEFC,QAnBa,WAoBX,MAAO,CACLC,QAAA,SAGJC,OAAQ,CAAC,qBACTC,QAAS,CACPvB,MADO,WACC,WACAwB,EAAE,UAAO,uCAAP,iBACRC,KAAKX,WAAY,EACjBW,KAAKC,MAAMC,KAAKH,EAAKC,KAAKtB,MAAMyB,MAAK,SAACC,GACpC,MAA2BA,EAAShB,KAA5BiB,EAAR,EAAQA,MAAOC,EAAf,EAAeA,QACfC,SAASC,OAAT,mBAA8BH,EAA9B,oBAA+C,IAAII,KAAKH,GAAxD,KACA,EAAKjB,WAAY,EACjB,EAAKqB,QAAQC,KAAK,aACjBC,OAAM,WACP,EAAKvB,WAAY,EACjB,EAAKwB,kBAAkB,EAAKvB,KAAM,UAGtCwB,WAdO,WAcM,WACLf,EAAE,UAAO,uCAAP,mBACRC,KAAKC,MAAMC,KAAKH,GACfI,MAAK,SAACC,GACFA,EAAShB,KAAKG,UACf,EAAKR,aAAc,EACnB,EAAKE,WAAa,gBAClB,EAAKE,SAAW,gBAChB4B,YAAW,WACT,EAAKL,QAAQC,KAAK,YACjB,UAKNC,OAAM,WACL,EAAKC,kBAAkB,EAAKvB,KAAM,WAIxC0B,QA3Da,WA4DX,IAAMX,EAAQE,SAASC,OAAOS,QAAQ,iDAAkD,MACxFjB,KAAKC,MAAMiB,SAASC,QAAQC,OAAOC,cAAgBhB,EACnDL,KAAKc,e,qBC9GT,MAAMQ,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"assets/js/chunk-244597b0.dbd0d76f.js","sourcesContent":["module.exports = __webpack_public_path__ + \"assets/img/logo.eb050ee8.gif\";","<template>\n  <div>\n    <!-- <Loading :active=\"isLoading\" :z-index=\"1060\"></Loading> -->\n    <ToastMessages></ToastMessages>\n    <div class=\"container vh-100\">\n      <router-link class=\"navbar-brand text-secondary\" to=\"/\">\n        <img src=\"@/assets/images/logo.gif\" alt=\"TheNo9-LOGO\" style=\"width: 160px;\" class=\"me-3\" />\n      </router-link>\n      <form \n        class=\"form-floating row h-100 align-items-center justify-content-center\"\n        @submit.prevent=\"login\"\n      >\n        <div class=\"col-md-5\">\n          <div class=\"h3 mb-4 text-center\">請先登入</div>\n          <div class=\"mb-3\">\n            <label for=\"floatingInputInvalid\">Email address</label>\n            <input \n              type=\"email\" \n              class=\"form-control\" \n              id=\"floatingInputInvalid\" \n              placeholder=\"name@example.com\"\n              v-model=\"user.username\"\n              required\n              autofocus\n            >\n          </div>\n          <div class=\"mb-4\">\n            <label for=\"floatingInputInvalid2\">Password</label>\n            <input \n              type=\"password\" \n              class=\"form-control\" \n              id=\"floatingInputInvalid2\" \n              placeholder=\"請輸入密碼\" \n              v-model=\"user.password\"\n              required\n            >\n          </div>\n          <div class=\"text-center\">\n            <button type=\"submit\" class=\"w-50 btn btn-secondary\">登入</button>\n          </div>\n        </div>\n      </form>\n    </div>\n  </div>\n  <div class=\"d-flex justify-content-center w-100\">\n    <Alert v-if=\"isShowAlert\" :customClass=\"alertClass\" :content=\"alertMsg\" />\n  </div>\n</template>\n\n<script>\nimport emitter from '@/methods/eventBus';\nimport ToastMessages from '@/components/ToastMessages.vue';\n\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      isShowAlert: false,\n      alertMsg: '',\n      alertClass: 'alert-success',\n      user: {},\n      tips: {\n        data: {\n          success: false,\n          message: '登入失敗，請重新登入。',\n        },\n      },\n    };\n  },\n  components: {\n    ToastMessages,\n  },\n  provide() {\n    return {\n      emitter,\n    };\n  },\n  inject: ['$httpMessageState'],\n  methods: {\n    login() {\n      const api = `${process.env.VUE_APP_API}/admin/signin`;\n      this.isLoading = true;\n      this.$http.post(api, this.user).then((response) => {\n        const { token, expired } = response.data;\n        document.cookie = `hexToken=${token};expires=${new Date(expired)};`;\n        this.isLoading = false;\n        this.$router.push('/admin');\n      }).catch(() => {\n        this.isLoading = false;\n        this.$httpMessageState(this.tips, '登入');\n      });\n    },\n    checkLogin() {\n      const api = `${process.env.VUE_APP_API}/api/user/check`;\n      this.$http.post(api)\n      .then((response) => {\n        if(response.data.success) {\n          this.isShowAlert = true;\n          this.alertClass = 'alert-warning';\n          this.alertMsg = '你已登入! 即將轉頁至後台';\n          setTimeout(() => {\n            this.$router.push('/admin');\n          }, 1500);\n        } else { \n          // ...\n        }\n      })\n      .catch(() => {\n        this.$httpMessageState(this.tips, '登入');\n      })\n    },\n  },\n  created() {\n    const token = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\n    this.$http.defaults.headers.common.Authorization = token;\n    this.checkLogin();\n  },\n  // methods: {\n  //   login() {\n  //     this.isLoading = true;\n  //     const api = `${process.env.VUE_APP_API}/admin/signin`;\n  //     this.$http.post(api, this.user)\n  //     .then((response) => {\n  //       if(response.data.success) {\n  //         const { token, expired } = response.data;\n  //         this.accessCookie(token, expired);\n  //         this.$router.push('/admin');\n  //       }\n  //       this.isLoading = false;\n  //     })\n  //     .catch((error) => {\n  //       this.isLoading = false;\n  //       this.$httpMessageState(error.response, '登入');\n  //     })\n  //   },\n  //   checkAdmin() {\n  //     const api = `${process.env.VUE_APP_API}/api/user/check`;\n  //     this.$http.post(api)\n  //     .then((response)=>{\n  //       if(response.data.success) {\n  //         this.$router.push('/admin');\n  //       } else {\n  //         // ...\n  //       }\n  //     })\n  //     .catch((error) => {\n  //       this.isLoading = false;\n  //       this.$httpMessageState(error.response, '登入');\n  //     })\n  //   },\n  //   accessCookie(token, expired) {\n  //     document.cookie = `hexToken=${token};expires=${new Date(expired)}; path=/`;\n  //   },\n  //   created() {\n  //     const token = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\n  //     this.$http.defaults.headers.common.Authorization = token;\n  //     this.checkAdmin();\n  //   },\n  // },\n};\n</script>","import { render } from \"./Login.vue?vue&type=template&id=7a88b594\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\html\\\\六角學院\\\\vue3\\\\vue-cli\\\\the-no9\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}